<div class="row">
  <div class="col-12">
    <%= select_tag 'page', options_for_select(@page, params[:p]), { prompt: "ËØ∑ÈÄâÊã©‰∏ÄÈ°µ", class: 'd-block form-control form-control-lg' } %>
    <br>
    <% if params[:p].blank? %>
      <h3>üëÜ ËØ∑‰ªé‰∏äÈù¢ÈÄâÊã©‰∏ÄÈ°µ„ÄÇ</h3>
    <% end %>
    <% @res.try(:each_with_index) do |res, i| %>
      <h3><%= i + 1 %>&nbsp;&nbsp;<%= res[:w] %></h3>
      <% res[:tw].each do |tw| %>
        <div class="alert alert-info">
          <h4><i class="fas fa-volume-up"></i> <%= tw["query"] %></h4>
          <% if tw['web'] %>
            <div><%= tw['web'][0]['value'].join('Ôºå') %></div>
          <% else %>
            <div><%= tw['translation'].join('Ôºå') %></div>
          <% end %>
          <audio>
            <source src="<%= tw['speakUrl'] %>" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>
          <div class="d-none"><%= tw %></div>
        </div>
      <% end %>
      <hr>
    <% end %>
    <br>
    <br>
    <br>
    <br>
  </div>

</div>


<script>
  $(function () {
    $('.alert-info').on('click', function () {
      $(this).find('audio')[0].play()
      console.log($(this).find('audio'))
    })

    $('#page').on('change', function () {
      Turbolinks.visit('<%= root_path %>' + '?p=' + $(this).val())
      console.log($(this).val())
    })
  })
</script>
